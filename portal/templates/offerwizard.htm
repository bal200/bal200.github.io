
<div class="ui main text container">
  <h1 class="ui header">Your Offer</h1>

  <div class="ui six top attached steps" style="margin-bottom: 0px;">
    <div class="step" ng-class="{ 'active': page==1 }">
      <div class="content">
        <div class="title">Offer</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==2 }">
      <div class="content">
        <div class="title">Details</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==3 }">
      <div class="content">
        <div class="title">Photo</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==4 }">
      <div class="content">
        <div class="title">Preview</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==5 }">
      <div class="content">
        <div class="title">Date</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==6 }">
        <div class="content">
          <div class="title">Publish</div>
        </div>
      </div>
  </div>


  <div class="ui attached very segment wizard" ng-if="page==1">
    <div class="ui text">
      <p>Think of a great catchy line about your offer.</p>
    
    <form class="ui form">
      <div class="field">
        <input type="text" name="title" ng-model="card.title2" placeholder="What have you got for the customers?">
      </div>
    </form>
    </div>

    <div class="ui icon message">
      <i class="question icon"></i>
      <div class="content">
        <div class="header">
          Need some inspiration?
        </div>
        <ul>
          <li>30 Big BUNS for your mouths</li>
          <li>Wait until you get Marks best bits IN YOUR MOUTH</li>
        </ul>
      </div>
    </div>

  </div>

  <div class="ui attached very segment wizard" ng-if="page==2">
    <div class="ui text">
      <p>Let people know the conditions of your deal and the price.</p>
    
      <form class="ui form">
        <div class="field">
          <textarea name="details" ng-model="card.campaign.message" placeholder="Offer Details"/>
        </div>
      </form>
    </div>

    <div class="ui icon message">
      <i class="question icon"></i>
      <div class="content">
        <div class="header">
          Need some inspiration?
        </div>
        <ul>
          <li>SMASH our Facebook LIKE button whilst in the queue for a free Coke can.</li>
          <li>Buy any sandwich and pay just 100% of the usual price.</li>
        </ul>
      </div>
    </div>
  </div>
  
  <div class="ui attached very segment wizard" ng-if="page==3">
    <div class="ui text">
      <p>Excite your customers with an eye catching photo of your product offer.</p>
    
    <form class="ui form">
      <div class="field">
        <input name="mypic" type="file" ng-model="data.pic" ng-change="base64Change()" 
               placeholder="" maxsize="5000" 
               accept="image/*" do-not-parse-if-oversize base-sixty-four-input >
      </div>
      <div ng-if="card.campaign.picture" class="field text-center">
        <img src="{{card.campaign.picture}}" style="margin:auto; width:80%" alt="">
        <!-- <img ng-show="card.templateVariables[4].value.filename" width="100%" src="data:{{card.templateVariables[4].value.filetype + ';base64,' + card.templateVariables[4].value.base64}}" /> -->

      </div>
    </form>
    </div>

    <div class="ui icon message">
        <i class="camera retro icon"></i>
        <div class="content">
          <div class="header">
            What makes a great photo?
          </div>
          <ul>
            <li>Exotic looking product photos</li>
            <li>Bright eye catching zebras</li>
          </ul>
        </div>
      </div>

  </div>

  <div class="ui attached very segment wizard" ng-if="page==4">
    <div class="ui padded">
      <p>We'll send out an offer card to your customers using the LunchAlert mobile app. Like what you see?</p>
    
      <cardpreview card="card" html="card.html" mywidth="360" myheight="280">
      </cardpreview>
    </div>
  </div>

  <div class="ui attached very segment wizard" ng-if="page==5">
    <div class="ui text">
      <p>What date should your offer be sent out to customer?</p>
      <p>We send out a notification to everyones phones at 8AM on
        the selected date so that they're prepared for your arrival that morning.</p>
    
      <form class="ui form">
        <div class="field">
          <ng-datepicker class="ui input" ng-model="card.campaign.startDate" ng-change="fromDateChange()" placeholder="Date to start"></ng-datepicker>
        </div>
        <p>Your offer card will remain visible in the LunchAlert app until the specified end date.</p>
        <div class="field">
          <ng-datepicker class="ui input" ng-model="card.campaign.endDate" ng-change="toDateChange()" placeholder="Date to stop"></ng-datepicker>
        </div>
      </form>
    </div>
  </div>

  <div class="ui attached very segment wizard" ng-if="page==6">
      <div class="ui two column doubling stackable grid container">
        <div class="column">
          <h2>Happy?</h2>
          <p>The offer will be published on {{card.campaign.startDate | date: 'dd/M/yy'}}</p>
          <p>A notification will be sent at 8AM on {{card.campaign.startDate | date: 'dd/M/yy'}}</p>
          <p>The offer will remain published until {{card.campaign.endDate | date: 'dd/M/yy'}}</p>
        </div>
        <div class="column">
            <cardpreview card="card" html="card.html" mywidth="320" myheight="310"></cardpreview> 
        </div>
      </div>
  </div>

  <div class="ui bottom attached segment">
  </div>

  <button ng-if="page!=6" class="ui left labeled floated icon secondary button" ng-click="cancelEdit()">
      <i class="window close outline icon"></i>
      Cancel
  </button>
  <button class="ui left labeled floated icon negative button" ng-click="deleteConfirm()">
      <i class="trash icon"></i>
      Delete
    </button>
  <button ng-if="page==6" class="ui right labeled right floated icon positive button" ng-click="finished()">
      <i class="right check icon"></i>
      Finish
  </button>
  <button ng-if="page!=6" class="ui right labeled right floated icon positive button" ng-click="pageNext()">
    <i class="right arrow icon"></i>
    Next
  </button>
  <button ng-if="page!=1" class="ui right floated labeled icon primary button" ng-click="pageBack()">
    <i class="left arrow icon"></i>
    Back
  </button>
</div>

<div class="ui basic modal">
  <div class="ui icon header">
    <i class="trash icon"></i>
    Delete Marketing Offer
  </div>
  <div class="content">
    <p>Deleting this offer will prevent it from being displayed on customers phones during the specified dates.</p>
  </div>
  <div class="actions">
    <div class="ui red basic cancel inverted button" ng-click="cancelEdit()">
      <i class="remove icon"></i>
      No
    </div>
    <div class="ui green ok inverted button" ng-click="deleteOffer()">
      <i class="checkmark icon"></i>
      Yes
    </div>
  </div>
</div>