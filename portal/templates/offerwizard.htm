<portalheader></portalheader>

<div class="ui main text container">
  <h1 class="ui header">Your Offer</h1>

  <div class="ui six top attached steps" style="margin-bottom: 0px;">
    <div class="step" ng-class="{ 'active': page==1 }">
      <div class="content">
        <div class="title">Offer</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==2 }">
      <div class="content">
        <div class="title">Details</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==3 }">
      <div class="content">
        <div class="title">Photo</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==4 }">
      <div class="content">
        <div class="title">Preview</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==5 }">
      <div class="content">
        <div class="title">Date</div>
      </div>
    </div>
    <div class="step" ng-class="{ 'active': page==6 }">
        <div class="content">
          <div class="title">Publish</div>
        </div>
      </div>
  </div>

  <form name="formObj">
    <div class="ui attached very segment wizard" ng-show="page==1">
      <div class="ui text">
        <p>Think of a great catchy line about your offer. This needs to draw your customer in so think catchy, clear, simple, and appealing.</p>
      
      <div class="ui form">
        <div class="field">
          <input type="text" name="title" ng-model="card.title2" placeholder="What have you got for the customers?" required>
        </div>
      </div>
      </div>

      <div class="ui icon message">
        <i class="question icon"></i>
        <div class="content">
          <div class="header">
            Need some inspiration?
          </div>
          <ul>
            <li>Superb meal deal</li>
            <li>Free drink or Chocolate bar with purchase</li>
            <li>One off special, if you miss it you will regret it</li>
          </ul>
        </div>
      </div>

    </div>

    <div class="ui attached very segment wizard" ng-show="page==2">
      <div class="ui text">
        <p>Let people know about your offer, tell them nuts and bolts of the deal.</p>
        <p>Be as descriptive as possible but also appealing as possible. Think about M&S and Sainsbury's adverts its got to be persuasive enough to make you want to jump in the car and go get it.</p>         
        <p>Would you buy this offer? Is it original, new, something others are not doing? Test it on strangers, will they put their money where their mouth is and buy it? (family, friends, staff will worry about hurting your feelings saying is not good)</p>
      
        <div class="ui form">
          <div class="field">
            <textarea name="details" ng-model="card.campaign.message" placeholder="Offer Details"/>
          </div>
        </div>
      </div>

      <div class="ui icon message">
        <i class="question icon"></i>
        <div class="content">
          <div class="header">
            Need some inspiration?
          </div>
          <ul>
            <li>Succulent roast pork with fresh sage and onion stuffing, organic apple sauce on a home made granary bun.</li>
            <li>Try our amazing moist and tasty sandwiches made fresh today.</li>
            <li>Sandwiches that shouldn't work but do. Todays challenge is to try one of our random sandwiches if you really hate it we will give u a free one tomorrow.</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="ui attached very segment wizard" ng-show="page==3">
      <div class="ui text">
        <p>Excite your customers with an eye catching photo of your product offer.</p>
        <p>Remember the most important thing about photos is that it portrays your company image. 
          Is anyone going to buy something when your photo looks like a dogs dinner (besides to 
          feed to the dog)?</p>
          <p style="font-size: 80%;">Maximum image size 110Kb</p>
      <div class="ui form">
        <div class="field">
          <input name="mypic" type="file" ng-model="data.pic" ng-change="base64Change()" 
                placeholder="" maxsize="110" 
                accept="image/*" do-not-parse-if-oversize base-sixty-four-input >
        </div>
        <div ng-if="card.campaign.picture" class="field text-center">
          <img src="{{card.campaign.picture}}" style="margin:auto; width:80%" alt="">
          <!-- <img ng-show="card.templateVariables[4].value.filename" width="100%" src="data:{{card.templateVariables[4].value.filetype + ';base64,' + card.templateVariables[4].value.base64}}" /> -->

        </div>
      </div>
      </div>

      <div class="ui icon message">
          <i class="camera retro icon"></i>
          <div class="content">
            <div class="header">
              What makes a great photo?
            </div>
            <p>So many companies let them selves down with bad images. Follow these simple rules to make sure you photo draws people in to buy.</p>
            <ul>
              <li>Remove everything from the background use a cloth draped over something so the food is centre stage. If you do use a background make sure it not got negative things like washing up, badly dressed staff etc.
                <li>What is the food displayed in? If it doesn't look good enough to serve to the Queen then its not good enough for the photo. Get the silver service wedding plates out.</li>
                <li>How is the food displayed? If its thrown on the plate without any care and attention to detail then its not for the photo. Again would you serve it to the Queens corgis never mind the Queen that way if not start again.</li>
                <li>Does it make everyones mouth water like a pavlogs dog if not why not and try again.</li>
                <li>If photos of your food don't look appertising, or are blurry or a bit dark, you're missing an oppotunity to sell your product.</li>
            </ul>
          </div>
        </div>

    </div>

    <div class="ui attached very segment wizard" ng-if="page==4">
      <div class="ui padded">
        <p>We'll send out an offer card to your customers using the LunchAlert mobile app. Do you like what you see?</p>
      
        <cardpreview card="card" html="card.html" mywidth="300" myheight="380">
        </cardpreview>
      </div>
    </div>

    <div class="ui attached very segment wizard" ng-show="page==5">
      <div class="ui text">
        <p>What date should your offer be sent out to customer?</p>
        <p>We send out a notification to everyones phones at 8AM on
          the selected date so that they're prepared for your arrival that morning.</p>
      
          <div class="ui form">
            <div class="fields">
              <div class="field">
                <label>Start Date</label>
                <ng-datepicker name="startDate" class="ui input " ng-model="card.campaign.startDate" ng-change="fromDateChange()" locale="en" placeholder="Date From"></ng-datepicker>
              </div>
              <div class="field">
                <label>&nbsp;</label>
                <div style="padding:8px;">{{card.campaign.startTime}}</div>
              </div>
            </div>
            <div class="fields">
              <div class="field">
                <label>Finish Date</label>
                <ng-datepicker name="endDate" required class="ui input fluid" ng-model="card.campaign.endDate" ng-change="toDateChange()" locale="en" placeholder="Date To"></ng-datepicker>
              </div>
              <div class="field">
                <label>&nbsp;</label>
                <div style="padding:8px;">{{card.campaign.endTime}}</div>
              </div>
             </div>
            <h4 ng-if="dateError" style="color:red;">{{dateError}}</h4>
          </div>
        
      </div>
    </div>

    <div class="ui attached very segment wizard" ng-if="page==6">
      <div class="ui form">
        <div class="fields">
          <div class="field">
            <h2>Happy?</h2>
            <p>The offer will be published on {{card.campaign.startDate | date: 'dd/MM/yy'}}</p>
            <p>A notification will be sent at {{card.campaign.startTime}} on {{card.campaign.startDate | date: 'dd/MM/yy'}}</p>
            <p>The offer will remain published until {{card.campaign.endTime}} on {{card.campaign.endDate | date: 'dd/MM/yy'}}</p>
          </div>
          <div class="field">
            <cardpreview card="card" html="card.html" mywidth="300" myheight="440"></cardpreview> 
          </div>
        </div>
      </div>

    </div>

    <div class="ui bottom attached segment">
    </div>

    <button ng-if="page!=6" class="ui left labeled floated icon secondary button" ng-click="cancelEdit()">
        <i class="window close outline icon"></i>
        Cancel
    </button>
    <button class="ui left labeled floated icon negative button" ng-click="deleteConfirm()">
        <i class="trash icon"></i>
        Delete
      </button>
    <button ng-if="page==6" type="submit" class="ui right labeled right floated icon positive button" 
            ng-class="{'disabled' : formObj.$invalid}" ng-click="finished()">
        <i class="right check icon"></i>
        Finish
    </button>
    <button ng-if="page!=6" class="ui right labeled right floated icon positive button" ng-click="pageNext()">
      <i class="right arrow icon"></i>
      Next
    </button>
    <button ng-if="page!=1" class="ui right floated labeled icon primary button" ng-click="pageBack()">
      <i class="left arrow icon"></i>
      Back
    </button>
    <!-- <h3>invalid:{{formObj.$invalid}} - dirty:{{formObj.$dirty}}</h3> -->
  </form>
</div>

<div class="ui basic modal">
  <div class="ui icon header">
    <i class="trash icon"></i>
    Delete Marketing Offer
  </div>
  <div class="content">
    <p>Deleting this offer will prevent it from being displayed on customers phones during the specified dates.</p>
  </div>
  <div class="actions">
    <div class="ui red basic cancel inverted button" ng-click="cancelEdit()">
      <i class="remove icon"></i>
      No
    </div>
    <div class="ui green ok inverted button" ng-click="deleteOffer()">
      <i class="checkmark icon"></i>
      Yes
    </div>
  </div>
</div>